<!DOCTYPE html>

<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en"> <!--<![endif]-->
<head>
<meta charset="utf-8"/>
<meta content="IE=edge" http-equiv="X-UA-Compatible"/>
<meta content="width=device-width, initial-scale=1.0" name="viewport"/>
<meta content="Armbian team" name="author"/>
<link href="../img/favicon.ico" rel="shortcut icon"/>
<title>H2+ and H3 - Armbian Documentation</title>
<link href="https://fonts.googleapis.com/css?family=Lato:400,700|Roboto+Slab:400,700|Inconsolata:400,700" rel="stylesheet">
<link href="../css/theme.css" rel="stylesheet"/>
<link href="../css/theme_extra.css" rel="stylesheet"/>
<link href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/github.min.css" rel="stylesheet"/>
<script>
    // Current page data
    var mkdocs_page_name = "H2+ and H3";
    var mkdocs_page_input_path = "Hardware_Allwinner-H3.md";
    var mkdocs_page_url = null;
  </script>
<script defer="" src="../js/jquery-2.1.1.min.js"></script>
<script defer="" src="../js/modernizr-2.8.3.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/highlight.min.js"></script>
<script>hljs.initHighlightingOnLoad();</script>
<script>
      (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
      })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

      ga('create', 'UA-284946-9', 'docs.armbian.com');
      ga('send', 'pageview');
  </script>
</link><link href="../pdf/document.pdf" rel="alternate" title="PDF" type="application/pdf"/></head>
<body class="wy-body-for-nav" role="document">
<div class="wy-grid-for-nav">
<nav class="wy-nav-side stickynav" data-toggle="wy-nav-shift">
<div class="wy-side-scroll">
<div class="wy-side-nav-search">
<a class="icon icon-home" href=".."> Armbian Documentation</a>
</div>
<div aria-label="main navigation" class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation">
<ul>
<li class="toctree-l1"><a class="reference internal" href="..">Home</a>
</li>
</ul>
<p class="caption"><span class="caption-text">User Guide</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../User-Guide_Getting-Started/">Getting Started</a>
</li>
<li class="toctree-l1"><a class="reference internal" href="../Quick_facts/">Quick facts</a>
</li>
<li class="toctree-l1"><a class="reference internal" href="../User-Guide_Basic-Troubleshooting/">Troubleshooting</a>
</li>
<li class="toctree-l1"><a class="reference internal" href="../User-Guide_Advanced-Features/">Advanced Features</a>
</li>
<li class="toctree-l1"><a class="reference internal" href="../User-Guide_Fine-Tuning/">Fine Tuning</a>
</li>
<li class="toctree-l1"><a class="reference internal" href="../User-Guide_Armbian-Config/">Armbian config</a>
</li>
<li class="toctree-l1"><a class="reference internal" href="../User-Guide_Allwinner_overlays/">Allwinner DT overlays</a>
</li>
<li class="toctree-l1"><a class="reference internal" href="../User-Guide_Migration_from_Bananian/">Migration from Bananian</a>
</li>
</ul>
<p class="caption"><span class="caption-text">Hardware Notes</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../Hardware_Allwinner/">Allwinner (Generic)</a>
</li>
<li class="toctree-l1"><a class="reference internal" href="../Hardware_Allwinner-A20/">A10 and A20</a>
</li>
<li class="toctree-l1 current"><a class="reference internal current" href="./">H2+ and H3</a>
<ul class="current">
<li class="toctree-l2"><a class="reference internal" href="#overview">Overview</a>
</li>
<li class="toctree-l2"><a class="reference internal" href="#kernel-support">Kernel support</a>
</li>
<li class="toctree-l2"><a class="reference internal" href="#default-settings">Default settings</a>
</li>
<li class="toctree-l2"><a class="reference internal" href="#tips-and-tricks-general">Tips and tricks (general)</a>
</li>
<li class="toctree-l2"><a class="reference internal" href="#tips-and-tricks-h3-specific-lowering-consumption-outdated">Tips and tricks (H3 specific / lowering consumption) (outdated)</a>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../Hardware_Allwinner-H5-A64/">H5 and A64</a>
</li>
<li class="toctree-l1"><a class="reference internal" href="../Hardware_Allwinner-H6/">H6</a>
</li>
<li class="toctree-l1"><a class="reference internal" href="../Hardware_Freescale-imx6/">Freescale i.MX6</a>
</li>
<li class="toctree-l1"><a class="reference internal" href="../Hardware_Marvell/">Marvell Armada</a>
</li>
</ul>
<p class="caption"><span class="caption-text">Developer Guide</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../Developer-Guide_Build-Preparation/">Building Armbian</a>
</li>
<li class="toctree-l1"><a class="reference internal" href="../Developer-Guide_Using-Vagrant/">Building with Vagrant</a>
</li>
<li class="toctree-l1"><a class="reference internal" href="../Developer-Guide_Building-with-Docker/">Building with Docker</a>
</li>
<li class="toctree-l1"><a class="reference internal" href="../Developer-Guide_Build-Options/">Build Options</a>
</li>
<li class="toctree-l1"><a class="reference internal" href="../Developer-Guide_User-Configurations/">User Configurations</a>
</li>
<li class="toctree-l1"><a class="reference internal" href="../Developer-Guide_FEL-boot/">FEL boot</a>
</li>
</ul>
<p class="caption"><span class="caption-text">Contributor Process</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../Process_Contribute/">Contribute</a>
</li>
<li class="toctree-l1"><a class="reference internal" href="../Process_Merge-Policy/">Merge Policy</a>
</li>
<li class="toctree-l1"><a class="reference internal" href="../Process_Documentation/">Documentation</a>
</li>
</ul>
<p class="caption"><span class="caption-text">Release management</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../Process_Release-Model/">Model</a>
</li>
<li class="toctree-l1"><a class="reference internal" href="../Release_Changelog/">Changelog</a>
</li>
</ul>
<p class="caption"><span class="caption-text">Community</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../Community_IRC/">IRC</a>
</li>
</ul>
</div>
</div>
</nav>
<section class="wy-nav-content-wrap" data-toggle="wy-nav-shift">
<nav aria-label="top navigation" class="wy-nav-top" role="navigation">
<i class="fa fa-bars" data-toggle="wy-nav-top"></i>
<a href="..">Armbian Documentation</a>
</nav>
<div class="wy-nav-content">
<div class="rst-content">
<div aria-label="breadcrumbs navigation" role="navigation">
<ul class="wy-breadcrumbs">
<li><a href="..">Docs</a> »</li>
<li>Hardware Notes »</li>
<li>H2+ and H3</li>
<li class="wy-breadcrumbs-aside">
<a class="icon icon-github" href="https://github.com/armbian/documentation/edit/master/docs/Hardware_Allwinner-H3.md"> Edit on Github</a>
</li>
</ul>
<hr/>
</div>
<div role="main">
<div class="section">
<h1 id="allwinner-h3-boards">Allwinner H3 boards<a class="headerlink" href="#allwinner-h3-boards" title="Permanent link">¶</a></h1>
<h3 id="overview">Overview<a class="headerlink" href="#overview" title="Permanent link">¶</a></h3>
<p>The H3 SoC from Allwinner is meant for OTT boxes and therefore its reference design is <em>not</em> accompanied by a separate PMIC (power management IC) unlike <em>A series</em> Allwinner SoCs (like A10, A20, A64, …). No PMIC means also that there is no battery charging/monitoring implemented so H3 is not that much suited for mobile devices. On the other hand some pretty cheap H3 boards were released that can be driven with rather low consumption and therefore combining H3 devices with a battery became a real use case with boards like <a href="http://linux-sunxi.org/Orange_Pi_Lite">Orange Pi One/Lite</a>, NanoPi <a href="http://linux-sunxi.org/FriendlyARM_NanoPi_NEO">NEO and Neo AIR</a>.</p>
<p>As usual <a href="http://linux-sunxi.org/H3">SoC</a> and <a href="http://linux-sunxi.org/Category:H3_Devices">device information</a> can be found in Linux-sunxi wiki. Same applies to status of <a href="http://linux-sunxi.org/Linux_mainlining_effort">mainlining kernel efforts</a>. Adding to the usual SoC feature set (I2C, SPI, PWM, UART, SDIO, GPIO and so on) H3 has one USB OTG port, 3 real USB host ports (not exposed on all devices), Fast- and Gigabit Ethernet capablities (board specific), a Mali400MP2 GPU and Allwinner’s video encoding/decoding engine.</p>
<p>When CPU or GPU cores are fully utilized H3 tends to overheat over time like any other popular ARM SoC released within the last 2-3 years. With Armbian we provide sane dvfs (dynamic voltage frequency scaling) settings that help a lot with throttling. In case you plan to operate your H3 device constantly under high load please check Armbian forums first since boards behave differently (related to voltage regulation and PCB size and design – some use copper layers to spread the heat away from the SoC). Also consider applying a heatsink to the SoC (a fan should not be necessary unless you want to do number crunching on your board and then you obviously chose the wrong device).</p>
<p>You find some <a href="https://forum.armbian.com/topic/1351-h3-board-buyers-guide/">differentiation criteria regarding supported H3 devices as well as an overview/history of H3 software support in our forums</a> or use Jean-Luc’s <a href="http://www.cnx-software.com/2016/06/08/allwinner-h3-boards-comparison-tables-with-orange-pi-banana-pi-m2-nanopi-p1-and-h3-olinuxino-nano-boards/#comments">nice comparison table</a> (both slightly outdated since more H3 devices have been released in the meantime).</p>
<h3 id="kernel-support">Kernel support<a class="headerlink" href="#kernel-support" title="Permanent link">¶</a></h3>
<p>Almost all features of the H3 SoC are supported on Armbian’s <em>current</em> branch. Please refer to the <a href="https://linux-sunxi.org/Linux_mainlining_effort">Linux sunxi support sheet</a>.</p>
<h3 id="default-settings">Default settings<a class="headerlink" href="#default-settings" title="Permanent link">¶</a></h3>
<ul>
<li>CPU frequency settings are 240-912 MHz on NanoPi NEO, 240-1200 MHz on BPi M2+, NanoPi M1 and Beelink X2, 480-1200 MHz on OPi One/Lite and 480-1296 MHz on the other boards (cpufreq governor is <em>interactive</em> therefore the boards only increase CPU speed and consumption when needed). The differences are due to different voltage regulators and heat dissipation behaviour.</li>
<li>Armbian unlike older/other H3 OS images uses the green led as ‘power on’ indicator (blinking means ‘ready to login’ or ‘shutting down’), the red led (blue on NanoPis) can be used for your own purpose.</li>
</ul>
<h3 id="tips-and-tricks-general">Tips and tricks (general)<a class="headerlink" href="#tips-and-tricks-general" title="Permanent link">¶</a></h3>
<ul>
<li>An insufficient power supply <strong>is the root cause of many weird symptoms/problems</strong>. Never trust in ratings written on the PSU since they might be wrong, the PSU might be old/dying and cable/contact resistance adds to problems. In other words: Before you blame Armbian for strange behaviour please try at least one second power supply (this applies to both PSU and cable between PSU and board if this is separate – especially USB cables really suck due to high resistance leading to severe voltage drops).</li>
<li>In case you experience instabilities check your SD card using <code>armbianmonitor -c $HOME</code> and think about installing <a href="http://www.cnx-software.com/2016/03/17/rpi-monitor-is-a-web-based-remote-monitor-for-arm-development-boards-such-as-raspberry-pi-and-orange-pi/">RPi-Monitor for H3</a> to get an idea whether you suffer from overheating (<code>sudo armbianmonitor -r</code> will install everything needed).</li>
<li>Especially for desktop images the speed of your SD card matters. If possible try to use our <em>nand-sata-install</em> script to move the rootfs away from SD card. The script also works with USB disks flawlessly (<a href="https://forum.armbian.com/topic/793-moving-to-harddisk/">some background information</a>).</li>
</ul>
<h3 id="tips-and-tricks-h3-specific-lowering-consumption-outdated">Tips and tricks (H3 specific / lowering consumption) (outdated)<a class="headerlink" href="#tips-and-tricks-h3-specific-lowering-consumption-outdated" title="Permanent link">¶</a></h3>
<p>Recent research showed that H3 boards operated as wired IoT nodes need way less power compared to Raspberry Pis in the same situation (ethernet active). If you want to use your H3 device headless (server/IoT) and care about power consumption then there exist a couple of tweaks to get your board being more energy efficient when using in the meantime unsupported 3.x kernel (no tests done yet with up-to-date <em>legacy</em>/<em>current</em> kernel):</p>
<ul>
<li>Disabling HDMI/GPU saves ~200mW.</li>
<li>Allowing to temporarely only negotiate a Fast Ethernet connection on GbE capable boards saves +350 mW.</li>
<li>Adjusting DRAM clockspeed is surprisingly another way to control consumption (on NanoPi NEO for example changing DRAM clockspeed between 132 MHz and 672 MHz results in consumption differences of 470mW).</li>
<li>Limiting maximum CPU clockspeed will help with lowering maximum consumption (think about scripts running amok or something going terribly wrong), the same applies to limiting the count of active CPU cores.</li>
<li>Choosing a board with Fast instead of Gigabit Ethernet or disabling GbE on the latter using <code>ethtool</code> or <code>ifconfig</code> saves at least 150 mW (board specific).</li>
</ul>
<p>As an example: We chose default Armbian settings for NanoPi NEO to ensure this board is not able to exceed 2W consumption when running with no peripherals connected. This resulted in CPU and DRAM clockspeed of just 480/408 MHz while <em>booting</em> (the first ~20 seconds). In normal operation we limit maximum CPU clockspeed to 912 MHz to stay below the 2W consumption barrier even in worst case scenarios.</p>
<p>In case you want to have a few more percent maximum CPU performance you would need to set maximum cpufreq to 1200 MHz instead of ‘just’ 912 MHz maximum CPU clock using our new <a href="https://forum.armbian.com/topic/1878-testers-wanted-h3consumption-to-be-included-into-future-armbian-releases/">h3consumption tool</a>. Be warned: This will both heavily increase consumption and SoC temperature since exceeding 912 MHz CPU clockspeed means feeding the SoC with 1.3V instead of 1.1V core voltage (most smaller H3 devices use a voltage regulator only switching between two voltages to feed the SoC based on load).</p>
<p>Walking this route in the other direction is more interesting: In case you want to use an H3 device as IoT node you might want to limit both idle and maximum consumption. That should involve disabling stuff not needed (eg. HDMI/GPU since this saves 200mW) or limiting ressource consumption: Lowering maximum clockspeeds for both CPU and DRAM or even disabling CPU cores (which helps <em>not</em> with idle consumption since ARM cores enter low-power modes if not needed but can help lowering maximum consumption requirements).</p>
<p>Since all of this stuff is based on recent research and being still WiP please consider reading through relevant threads in Armbian forums <strong>and</strong> join development/research/discussions: <a href="https://forum.armbian.com/topic/1748-sbc-consumptionperformance-comparisons/">SBC consumption/performance comparisons</a> and <a href="https://forum.armbian.com/topic/1728-rfc-default-settings-for-nanopi-neoair/">Default settings for NanoPi NEO/Air</a>.</p>
</div>
</div>
<footer>
<div aria-label="footer navigation" class="rst-footer-buttons" role="navigation">
<a class="btn btn-neutral float-right" href="../Hardware_Allwinner-H5-A64/" title="H5 and A64">Next <span class="icon icon-circle-arrow-right"></span></a>
<a class="btn btn-neutral" href="../Hardware_Allwinner-A20/" title="A10 and A20"><span class="icon icon-circle-arrow-left"></span> Previous</a>
</div>
<hr/>
<div role="contentinfo">
<!-- Copyright etc -->
</div>

  Built with <a href="https://www.mkdocs.org/">MkDocs</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>.
</footer>
</div>
</div>
</section>
</div>
<div aria-label="versions" class="rst-versions" role="note">
<span class="rst-current-version" data-toggle="rst-current-version">
<span><a href="../Hardware_Allwinner-A20/" style="color: #fcfcfc;">« Previous</a></span>
<span style="margin-left: 15px"><a href="../Hardware_Allwinner-H5-A64/" style="color: #fcfcfc">Next »</a></span>
</span>
</div>
<script>var base_url = '..';</script>
<script defer="" src="../js/theme.js"></script>
<script defer="">
        window.onload = function () {
            SphinxRtdTheme.Navigation.enable(true);
        };
    </script>
</body>
</html>
